<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>SV1 – Step 2: mining.subscribe</title>
<link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet"/>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Space+Grotesk:wght@500;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet"/>
<style>
    body { width:1280px; height:720px; overflow:hidden; font-family:'Inter',sans-serif; background-color:#000; color:#F8FAFC; position:relative; }
    .bg-grid { position:absolute; inset:0; z-index:1; background-image: linear-gradient(rgba(6,182,212,0.07) 1px,transparent 1px), linear-gradient(90deg,rgba(6,182,212,0.07) 1px,transparent 1px); background-size:30px 30px; opacity:0.5; }
    .glass-panel { background:rgba(0,0,0,0.45); backdrop-filter:blur(10px); border:1px solid rgba(6,182,212,0.18); box-shadow:0 0 40px rgba(6,182,212,0.04); }
    .mono-font { font-family:'JetBrains Mono',monospace; }
</style>
</head>
<body class="relative flex flex-col justify-between">
<div class="bg-grid"></div>

<!-- Header -->
<header class="relative z-10 px-16 pt-9 pb-4 flex items-end justify-between"
        style="border-bottom:1px solid rgba(6,182,212,0.2); background:rgba(0,0,0,0.5);">
    <div>
        <div class="flex items-center space-x-3 mb-2">
            <span class="px-2 py-1 text-xs font-bold rounded mono-font"
                  style="background:rgba(6,182,212,0.15);color:#22d3ee;border:1px solid rgba(6,182,212,0.3);">
                SV1 PROTOCOL
            </span>
            <span class="text-xs mono-font" style="color:rgba(6,182,212,0.5);">// STEP 2</span>
        </div>
        <h1 class="text-3xl font-black tracking-tight text-white"
            style="font-family:'Space Grotesk',sans-serif;letter-spacing:-0.02em;">
            mining.<span style="color:#22d3ee;">subscribe</span>
        </h1>
    </div>
    <div class="text-right">
        <p class="text-sm mono-font" style="color:rgba(148,163,184,0.7);">Subscribe · Extranonce · Coinbase structure</p>
    </div>
</header>

<!-- Main -->
<main class="relative z-10 flex-1 w-full flex items-center justify-center" style="padding:12px 32px 56px;">
    <div class="w-full h-full glass-panel rounded-xl" style="overflow:hidden;">
        <svg width="100%" height="100%" viewBox="0 0 1152 430" preserveAspectRatio="xMidYMid meet">
            <defs>
                <marker id="arrR" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
                    <polygon points="0 0,10 3.5,0 7" fill="#06b6d4"/>
                </marker>
                <marker id="arrL" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
                    <polygon points="0 0,10 3.5,0 7" fill="#22d3ee"/>
                </marker>
            </defs>

            <!-- ── MINER box ── -->
            <g transform="translate(24,16)">
                <rect x="0" y="0" width="165" height="155" rx="10"
                      fill="rgba(6,182,212,0.06)" stroke="#06b6d4" stroke-width="2"
                      filter="drop-shadow(0 4px 12px rgba(6,182,212,0.2))"/>
                <rect x="57" y="16" width="50" height="50" rx="6"
                      fill="rgba(6,182,212,0.12)" stroke="rgba(6,182,212,0.3)" stroke-width="1"/>
                <text x="82" y="50" text-anchor="middle" font-size="24" fill="#22d3ee">⬡</text>
                <text x="82" y="84" text-anchor="middle"
                      font-family="Space Grotesk" font-size="15" font-weight="700" fill="#F8FAFC">MINER</text>
                <text x="82" y="102" text-anchor="middle"
                      font-family="JetBrains Mono" font-size="9" fill="rgba(148,163,184,0.7)">Worker / ASIC</text>
            </g>

            <!-- ── POOL box ── -->
            <g transform="translate(963,16)">
                <rect x="0" y="0" width="165" height="155" rx="10"
                      fill="rgba(6,182,212,0.06)" stroke="#06b6d4" stroke-width="2"
                      filter="drop-shadow(0 4px 12px rgba(6,182,212,0.2))"/>
                <rect x="57" y="16" width="50" height="50" rx="6"
                      fill="rgba(6,182,212,0.12)" stroke="rgba(6,182,212,0.3)" stroke-width="1"/>
                <text x="82" y="50" text-anchor="middle" font-size="24" fill="#22d3ee">▣</text>
                <text x="82" y="84" text-anchor="middle"
                      font-family="Space Grotesk" font-size="15" font-weight="700" fill="#F8FAFC">POOL</text>
                <text x="82" y="102" text-anchor="middle"
                      font-family="JetBrains Mono" font-size="9" fill="rgba(148,163,184,0.7)">Job Coordinator</text>
            </g>

            <!-- ── Request: Miner→Pool at y=70 ── -->
            <line x1="189" y1="70" x2="963" y2="70"
                  stroke="#06b6d4" stroke-width="2" fill="none" marker-end="url(#arrR)"/>
            <rect x="477" y="52" width="198" height="22" rx="5"
                  fill="rgba(0,0,0,0.7)" stroke="rgba(6,182,212,0.45)" stroke-width="1"/>
            <text x="576" y="67" text-anchor="middle"
                  font-family="JetBrains Mono" font-size="12" font-weight="500" fill="#06b6d4">mining.subscribe</text>

            <!-- ── Response: Pool→Miner at y=112 ── -->
            <line x1="963" y1="112" x2="189" y2="112"
                  stroke="#22d3ee" stroke-width="2" fill="none" marker-end="url(#arrL)"/>
            <rect x="330" y="88" width="492" height="22" rx="5"
                  fill="rgba(0,0,0,0.7)" stroke="rgba(253,230,138,0.4)" stroke-width="1"/>
            <text x="576" y="103" text-anchor="middle"
                  font-family="JetBrains Mono" font-size="12">
                <tspan fill="rgba(200,210,220,0.7)">response: [ </tspan><tspan fill="#fde68a" font-weight="700">extranonce1</tspan><tspan fill="rgba(200,210,220,0.5)">  ·  </tspan><tspan fill="#fde68a" font-weight="700">extranonce2_len</tspan><tspan fill="rgba(200,210,220,0.7)"> ]</tspan>
            </text>

            <!-- ── Block Header (compact) ── -->
            <rect x="0" y="178" width="1152" height="42" rx="4"
                  fill="rgba(6,182,212,0.06)" stroke="rgba(6,182,212,0.35)" stroke-width="1.5"/>
            <line x1="0" y1="194" x2="1152" y2="194" stroke="rgba(6,182,212,0.2)" stroke-width="1"/>
            <text x="576" y="189" text-anchor="middle" dominant-baseline="middle"
                  font-family="JetBrains Mono" font-size="9" font-weight="700"
                  fill="rgba(6,182,212,0.65)" letter-spacing="0.12em">BLOCK HEADER</text>
            <line x1="115" y1="194" x2="115" y2="220" stroke="rgba(6,182,212,0.2)" stroke-width="1"/>
            <line x1="340" y1="194" x2="340" y2="220" stroke="rgba(6,182,212,0.2)" stroke-width="1"/>
            <line x1="565" y1="194" x2="565" y2="220" stroke="rgba(6,182,212,0.2)" stroke-width="1"/>
            <line x1="720" y1="194" x2="720" y2="220" stroke="rgba(6,182,212,0.2)" stroke-width="1"/>
            <line x1="875" y1="194" x2="875" y2="220" stroke="rgba(6,182,212,0.2)" stroke-width="1"/>
            <text x="57"  y="210" text-anchor="middle" font-family="JetBrains Mono" font-size="11" fill="#22d3ee">version</text>
            <text x="227" y="210" text-anchor="middle" font-family="JetBrains Mono" font-size="11" fill="#22d3ee">prev block hash</text>
            <text x="452" y="210" text-anchor="middle" font-family="JetBrains Mono" font-size="11" fill="#22d3ee">merkle root</text>
            <text x="642" y="210" text-anchor="middle" font-family="JetBrains Mono" font-size="11" fill="#22d3ee">ntime</text>
            <text x="797" y="210" text-anchor="middle" font-family="JetBrains Mono" font-size="11" fill="#22d3ee">nbits</text>
            <text x="1013" y="210" text-anchor="middle" font-family="JetBrains Mono" font-size="11" fill="#22d3ee">nonce</text>

            <!-- ── Coinbase label row ── -->
            <rect x="0" y="226" width="1152" height="16" rx="0"
                  fill="rgba(6,182,212,0.04)" stroke="rgba(6,182,212,0.15)" stroke-width="1"/>
            <text x="576" y="237" text-anchor="middle" dominant-baseline="middle"
                  font-family="JetBrains Mono" font-size="8" font-weight="700"
                  fill="rgba(6,182,212,0.6)" letter-spacing="0.1em">COINBASE TRANSACTION  ·  fields from subscribe response highlighted</text>

            <!-- coinbase1 -->
            <rect x="0" y="242" width="190" height="140" rx="0"
                  fill="rgba(6,182,212,0.04)" stroke="rgba(6,182,212,0.25)" stroke-width="1"/>
            <text x="95" y="316" text-anchor="middle" font-family="JetBrains Mono" font-size="13" fill="rgba(148,163,184,0.8)">coinbase1</text>

            <!-- extranonce1 — YELLOW solid -->
            <rect x="190" y="242" width="300" height="140" rx="0"
                  fill="rgba(253,230,138,0.1)" stroke="#fde68a" stroke-width="2"/>
            <text x="340" y="305" text-anchor="middle" font-family="JetBrains Mono" font-size="16" font-weight="700" fill="#fde68a">extranonce1</text>
            <text x="340" y="328" text-anchor="middle" font-family="JetBrains Mono" font-size="10" fill="rgba(253,230,138,0.7)">pool-assigned · fixed per session</text>

            <!-- extranonce2 — YELLOW dashed -->
            <rect x="490" y="242" width="390" height="140" rx="0"
                  fill="rgba(253,230,138,0.05)" stroke="#fde68a" stroke-width="2" stroke-dasharray="7,4"/>
            <text x="685" y="305" text-anchor="middle" font-family="JetBrains Mono" font-size="16" font-weight="700" fill="#fde68a">extranonce2</text>
            <text x="685" y="328" text-anchor="middle" font-family="JetBrains Mono" font-size="10" fill="rgba(253,230,138,0.7)">miner-varies · length = extranonce2_len</text>

            <!-- coinbase2 -->
            <rect x="880" y="242" width="272" height="140" rx="0"
                  fill="rgba(6,182,212,0.04)" stroke="rgba(6,182,212,0.25)" stroke-width="1"/>
            <text x="1016" y="316" text-anchor="middle" font-family="JetBrains Mono" font-size="13" fill="rgba(148,163,184,0.8)">coinbase2</text>

        </svg>
    </div>
</main>

<!-- Step progress bar -->
<div style="position:absolute;bottom:0;left:0;right:0;z-index:10;height:44px;display:flex;align-items:center;padding:0 80px;gap:7px;background:rgba(0,0,0,0.8);border-top:1px solid rgba(6,182,212,0.15);">
    <span style="font-family:'JetBrains Mono',monospace;font-size:9px;color:rgba(6,182,212,0.35);letter-spacing:.15em;margin-right:6px;flex-shrink:0;">FLOW</span>
    <span style="font-family:'JetBrains Mono',monospace;font-size:11px;padding:4px 14px;border-radius:999px;flex-shrink:0;background:rgba(6,182,212,0.06);border:1px solid rgba(6,182,212,0.25);color:rgba(6,182,212,0.5);">1 · TCP</span>
    <span style="color:rgba(6,182,212,0.25);font-size:12px;flex-shrink:0;">›</span>
    <span style="font-family:'JetBrains Mono',monospace;font-size:11px;font-weight:700;padding:4px 14px;border-radius:999px;flex-shrink:0;background:rgba(6,182,212,0.2);border:1px solid #22d3ee;color:#22d3ee;">2 · subscribe</span>
    <span style="color:rgba(6,182,212,0.25);font-size:12px;flex-shrink:0;">›</span>
    <span style="font-family:'JetBrains Mono',monospace;font-size:11px;padding:4px 14px;border-radius:999px;flex-shrink:0;background:transparent;border:1px solid rgba(6,182,212,0.12);color:rgba(6,182,212,0.25);">3 · authorize</span>
    <span style="color:rgba(6,182,212,0.25);font-size:12px;flex-shrink:0;">›</span>
    <span style="font-family:'JetBrains Mono',monospace;font-size:11px;padding:4px 14px;border-radius:999px;flex-shrink:0;background:transparent;border:1px solid rgba(6,182,212,0.12);color:rgba(6,182,212,0.25);">4 · set_difficulty</span>
    <span style="color:rgba(6,182,212,0.25);font-size:12px;flex-shrink:0;">›</span>
    <span style="font-family:'JetBrains Mono',monospace;font-size:11px;padding:4px 14px;border-radius:999px;flex-shrink:0;background:transparent;border:1px solid rgba(6,182,212,0.12);color:rgba(6,182,212,0.25);">5 · notify</span>
    <span style="color:rgba(6,182,212,0.25);font-size:12px;flex-shrink:0;">›</span>
    <span style="font-family:'JetBrains Mono',monospace;font-size:11px;padding:4px 14px;border-radius:999px;flex-shrink:0;background:transparent;border:1px solid rgba(6,182,212,0.12);color:rgba(6,182,212,0.25);">6 · submit</span>
</div>

<script src="slides.js"></script>
<script src="navigate.js"></script>
</body>
</html>
